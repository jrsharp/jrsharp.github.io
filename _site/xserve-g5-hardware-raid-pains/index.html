<!doctype html>
<html class="no-js" lang="en">
<head>
		<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Xserve G5 Hardware RAID pains</title>
	<link rel="stylesheet" type="text/css" href="http://blog.jonsharp.net/assets/css/styles_feeling_responsive.css" />
	<script src="http://blog.jonsharp.net/assets/js/modernizr.min.js"></script>
	
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
  <script>
    WebFont.load({
      google: {
        families: [ 'Lato:400,700,400italic:latin', 'Volkhov::latin' ] 
      }
    });
  </script>

  <noscript>
    <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic|Volkhov' rel='stylesheet' type='text/css' />
  </noscript>
  
  <meta name="google-site-verification" content="Vk0IOJ2jwG_qEoG7fuEXYqv0m2rLa8P778Fi_GrsgEQ" />
	
	<meta name="description" content="Personal website of Jon Sharp - a Seventh-day Adventist Christian, family man, lover of the outdoors, technology leader, enterprise architect, embedded systems engineer, and retrocomputing enthusiast." />
	
	

	



	
	<link rel="icon" sizes="32x32" href="http://blog.jonsharp.net/assets/img/favicon-32x32.png" />




	
	<link rel="icon" sizes="192x192" href="http://blog.jonsharp.net/assets/img/touch-icon-192x192.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="180x180" href="http://blog.jonsharp.net/assets/img/apple-touch-icon-180x180-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="152x152" href="http://blog.jonsharp.net/assets/img/apple-touch-icon-152x152-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://blog.jonsharp.net/assets/img/apple-touch-icon-144x144-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="120x120" href="http://blog.jonsharp.net/assets/img/apple-touch-icon-120x120-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://blog.jonsharp.net/assets/img/apple-touch-icon-114x114-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="76x76" href="http://blog.jonsharp.net/assets/img/apple-touch-icon-76x76-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://blog.jonsharp.net/assets/img/apple-touch-icon-72x72-precomposed.png" />




	
	<link rel="apple-touch-icon-precomposed" href="http://blog.jonsharp.net/assets/img/apple-touch-icon-precomposed.png" />	




	
	<meta name="msapplication-TileImage" content="http://blog.jonsharp.net/assets/img/msapplication_tileimage.png" />




	
	<meta name="msapplication-TileColor" content="#fabb00" />



	<!-- Facebook Optimization -->
	<meta property="og:locale" content="en_EN" />
	<meta property="og:type" content="website" />
	<meta property="og:title" content="Xserve G5 Hardware RAID pains" />
	<meta property="og:description" content="Personal website of Jon Sharp - a Seventh-day Adventist Christian, family man, lover of the outdoors, technology leader, enterprise architect, embedded systems engineer, and retrocomputing enthusiast." />
	<meta property="og:url" content="http://blog.jonsharp.net//xserve-g5-hardware-raid-pains/" />
	<meta property="og:site_name" content="Jon Sharp, logged on the web" />
	

	

	<!-- Search Engine Optimization -->
	

	<link type="text/plain" rel="author" href="http://blog.jonsharp.net/humans.txt" />

	
</head>
</head>
<body id="top-of-page" class="post">
	
	
<div id="navigation" class="sticky">
  <nav class="top-bar" role="navigation" data-topbar>
    <ul class="title-area">
      <li class="name">
      <h1 class="show-for-small-only"><a href="http://blog.jonsharp.net" class="icon-tree"> Jon Sharp, logged on the web</a></h1>
    </li>
       <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
      <li class="toggle-topbar menu-icon"><a href="#"><span>Navigation</span></a></li>
    </ul>
    <section style="z-index: 1000;" class="top-bar-section">

      <ul class="right">
        

              
                
              

          
          
        

              
                
              

          
          
        

              
                
              

          
          
        

              
                
              

          
          
        

              
                
              

          
          
            
            
              <li class="divider"></li>
              <li><a href="http://blog.jonsharp.net/search/">Search</a></li>

            
            
          
        

              
                
              

          
          
            
            
              <li class="divider"></li>
              <li><a href="http://blog.jonsharp.net/contact/">Contact</a></li>

            
            
          
        
        
      </ul>

      <ul class="left">
        

              
                
              

          
          

            
            
              <li><a href="http://blog.jonsharp.net/">Home</a></li>
              <li class="divider"></li>

            
            
          
        

              
                
              

          
          

            
            

              <li class="has-dropdown">
                <a href="http://blog.jonsharp.net/projects/">Projects</a>

                  <ul class="dropdown">
                    

                      
                        
                      

                      <li><a href="http://blog.jonsharp.net/projects/gameboy/">Gameboy</a></li>
                    

                      
                        
                      

                      <li><a href="http://blog.jonsharp.net/projects/laptops/">Laptop Art</a></li>
                    

                      
                        
                      

                      <li><a href="http://blog.jonsharp.net/projects/vgdev/">Video Game Development</a></li>
                    
                  </ul>
                  
              </li>
              <li class="divider"></li>
            
          
        

              
                
              

          
          

            
            

              <li class="has-dropdown">
                <a href="http://blog.jonsharp.net/blog/">Blog</a>

                  <ul class="dropdown">
                    

                      
                        
                      

                      <li><a href="http://blog.jonsharp.net/blog/archive/">Blog Archive</a></li>
                    
                  </ul>
                  
              </li>
              <li class="divider"></li>
            
          
        

              
                
              

          
          

            
            

              <li class="has-dropdown">
                <a href="http://blog.jonsharp.net/misc/">Misc</a>

                  <ul class="dropdown">
                    

                      
                        
                      

                      <li><a href="http://blog.jonsharp.net/misc/pinhoti/">Pinhoti Trail</a></li>
                    

                      
                        
                      

                      <li><a href="http://blog.jonsharp.net/misc/sun/">Sun</a></li>
                    

                      
                        
                      

                      <li><a href="http://blog.jonsharp.net/misc/wishlist/">Wishlist</a></li>
                    
                  </ul>
                  
              </li>
              <li class="divider"></li>
            
          
        

              
                
              

          
          
        

              
                
              

          
          
        
        
      </ul>
    </section>
  </nav>
</div><!-- /#navigation -->

	

	

<div id="masthead-no-image-header">
	<div class="row">
		<div class="small-12 columns">
			<a id="logo" href="http://blog.jonsharp.net" title="Jon Sharp, logged on the web – web log of an Adventist Christian, technology professional, outdoor enthusiast...">
				<img src="http://blog.jonsharp.net/assets/img/JSHeader.png" alt="Jon Sharp, logged on the web – web log of an Adventist Christian, technology professional, outdoor enthusiast...">
			</a>
		</div><!-- /.small-12.columns -->
	</div><!-- /.row -->
</div><!-- /#masthead -->









	<div class="row t30">
	<div class="medium-8 columns medium-offset-2 end">
		<article itemscope itemtype="http://schema.org/Article">
			<header>
				

				<span itemprop="name">
					
					<h1>Xserve G5 Hardware RAID pains</h1>
				</span>
			</header>


			

			<span itemprop="articleSection">
			<p>Who knew it could be so hard to install a PCI hardware RAID controller in an Xserve G5?  Well, I learned about this unexpected difficulty today.  I write about it here because I think the experience may be useful to others. </p>

<p>The task for today was to upgrade from a single 80GB SATA drive to 3 80GB SATA drives in a hardware RAID-5 configuration.  (I chose the hardware RAID solution because I just don’t quite trust software RAID.)  I really didn’t this task would be as challenging as it turned out to be.  The first major roadblock came when I discovered that I needed a video card installed in order to perform the reinstallation of Mac OS X Server.  You see, Xserve G5s don’t come equipped with video cards.  These are entirely optional.  Now, that wouldn’t normally be a problem, as I would perform the installation on my powerbook, with the Xserve in Firewire Target Disk Mode.  However, because the new drives would be connected to the new PCI RAID controller, and not the main SATA controller, Firewire Target Disk Mode would not work.  The only way to do the install was to use a PCI video card.  So, I ran down to the local Mac store and picked up an ATI Radeon 9200 PCI ME w/ 128MB DDR.  (Yes, quite a bit of overkill for my purposes, but it was all that was available.  The Xserve booted up to the new video card just fine and I thought that was the last of my challenges.</p>

<p>However, in order to set up the RAID array, I needed the “megaraid” command line utility, which required the Mac OS X Server (10.3.5) Install CD, and I only had the 10.3.3 CD.  I thought I would have to get a newer CD shipped to me, but then I thought to check if perhaps I had the megaraid utility on my 10.3.9 install on my PowerBook.  I was pleased to find that I did and promptly connected my PowerBook in Firewire Target Disk Mode to the Xserve and booted up to the PowerBook HD.  It worked like a charm!  The megaraid utility picked up the controller and all three disks, and a quick “megaraid -create auto” gave me a new RAID-5 volume.</p>

<p>Now I thought I had it made.  Now that the array had been configured, the installation CD would see the disk and I could finish the install.  I was mistaken.  Not only did the 10.3.3 CD lack the “megaraid” command line utility, it lacked the RAID controller drivers, so no disks were detected on boot.  My next attempt involved creating a custom installation CD by making an image of the original CD and copying the kext from my PowerBook into it.  Unfortunately, this new Frankenstein CD resulted in a kernel panic and I finally realized I would have to give up and call Apple for a newer CD.</p>

<p>Sad ending, isn’t it?  I really got creative and thought I had it licked so many times.  I investigated a serial console installation, ssh-based remote install, ASR, netboot, etc., but I had to get that video card.  And I managed to keep overcoming the hurdles put in front of me, but then to be set back in the end was a real bummer.</p>

<p>Well, on the way home, I realized I had one more option.  And I really wish I would’ve thought of this sooner, because I think it has a real chance of working.  I should be able to boot up to my 10.3.9 (non-Server) installation on my PowerBook again from the Xserve and format the array and perform the install from the CD by simply installing the .mpkg on the CD.  I had to do the same thing in order to get the Tiger WWDC build to install on my 17” PowerBook.  Anyway, I think it has a real chance, but we’ll see.  Anyway, I hope this story has helped someone else out there with this task.  Remember, you need a video card.  Also, make sure you have the Mac OS X Server 10.3.5 or higher installation CDs.</p>

			</span>

			
						<div id="page-meta" class="t30">
				<p>
					<!-- Look the author details up from the site config. -->
					
					<!-- Output author details if some exist. -->
					

				
				<time class="icon-calendar pr20" datetime="2005-05-05" itemprop="datePublished"> 2005-05-05</time>
				

				<span class="icon-archive pr20"> </span>
				<br />
				<span class="pr20"></span>
			</p>

			<div id="post-nav" class="row">
				
				<div class="small-5 columns"><a class="button small radius prev" href="http://blog.jonsharp.net/im-your-firestarter/">&laquo; I'm your firestarter</a></div><!-- /.small-4.columns -->
				
				<div class="small-2 columns text-center"><a class="radius button small" href="http://blog.jonsharp.net/blog/archive/" title="Blog Archive">Archive</a></div><!-- /.small-4.columns -->
				
				<div class="small-5 columns text-right"><a class="button small radius next" href="http://blog.jonsharp.net/installing-tiger-on-lombard/">Installing Tiger on Lombard &raquo;</a></div><!-- /.small-4.columns -->
				
			</div>
			</div><!--  /.page-meta -->
			

			
		</article>
	</div><!-- /.medium-8.columns -->


	


	
</div><!-- /.row -->


	
	    <div id="up-to-top" class="row">
      <div class="small-12 columns" style="text-align: right;">
        <a class="iconfont" href="#top-of-page">&#xf108;</a>
      </div><!-- /.small-12.columns -->
    </div><!-- /.row -->


    <footer id="footer-content" class="bg-grau">
      <div id="footer">
        <div class="row">
          <div class="medium-6 large-5 columns">
            <h5 class="shadow-black">About This Site</h5>

            <p class="shadow-black">
              Personal website of Jon Sharp - a Seventh-day Adventist Christian, family man, lover of the outdoors, technology leader, enterprise architect, embedded systems engineer, and retrocomputing enthusiast.
              <a href="http://blog.jonsharp.net/info/">More ›</a>
            </p>
          </div><!-- /.large-6.columns -->


          <div class="small-6 medium-3 large-3 large-offset-1 columns">
            
              
                <h5 class="shadow-black">Services</h5>
              
            
              
            
              
            
              
            
              
            
              
              <ul class="no-bullet shadow-black">
              
                
                  <li >
                    <a href=""  title=""></a>
                  </li>
              
                
                  <li >
                    <a href="/contact/"  title="Contact">Contact</a>
                  </li>
              
                
                  <li >
                    <a href="/feed.xml"  title="Subscribe to RSS Feed">RSS</a>
                  </li>
              
                
                  <li >
                    <a href="/atom.xml"  title="Subscribe to Atom Feed">Atom</a>
                  </li>
              
                
                  <li >
                    <a href="/sitemap.xml"  title="Sitemap for Google Webmaster Tools">sitemap.xml</a>
                  </li>
              
              </ul>
          </div><!-- /.large-4.columns -->


          <div class="small-6 medium-3 large-3 columns">
            
              
                <h5 class="shadow-black">Thank you</h5>
              
            
              
            
              
            
              
            
              
            <ul class="no-bullet shadow-black">
            
              
                <li >
                  <a href=""  title=""></a>
                </li>
            
              
                <li class="network-entypo" >
                  <a href="http://entypo.com/" target="_blank"  title="Icons by Daniel Bruce">Icons by Daniel Bruce</a>
                </li>
            
              
                <li class="services-newsletter" >
                  <a href="http://foundation.zurb.com/" target="_blank"  title="Built on Foundation">Built on Foundation</a>
                </li>
            
              
                <li class="sitemap-link" >
                  <a href="http://srobbin.com/jquery-plugins/backstretch/" target="_blank"  title="Using Backstretch by Scott Robbin">Using Backstretch by Scott Robbin</a>
                </li>
            
            </ul>
          </div><!-- /.large-3.columns -->
        </div><!-- /.row -->

      </div><!-- /#footer -->


      <div id="subfooter">
        <nav class="row">
          <section id="subfooter-left" class="b30 small-12 medium-6 columns credits">
            <p>
              Created with &hearts;
              by&nbsp;<a href="http://jonsharp.net/">Jon&nbsp;Sharp</a>
              with&nbsp;<a href="http://jekyllrb.com/" target="_blank">Jekyll</a>
              based&nbsp;on&nbsp;<a href="http://phlow.github.io/feeling-responsive/">Feeling&nbsp;Responsive</a>.
            </p>
          </section>

          <section id="subfooter-right" class="small-12 medium-6 columns social-icons">
            <ul class="inline-list">
            
              <li><a href="http://twitter.com/jrsharp" target="_blank" class="icon-twitter" title="Jon Sharp's Twitter Feed"></a></li>
            
              <li><a href="https://www.linkedin.com/in/jonsharp1" target="_blank" class="icon-linkedin" title="Jon Sharp's LinkedIn Profile"></a></li>
            
              <li><a href="http://github.com/jrsharp" target="_blank" class="icon-github" title="Jon Sharp's GitHub"></a></li>
            
            </ul>
          </section>
        </nav>
      </div><!-- /#subfooter -->
    </footer>

	

	<script src="http://blog.jonsharp.net/assets/js/javascript.min.js"></script>





<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-70305955-1', 'auto');
  ga('send', 'pageview');

</script>






</body>
</html>

